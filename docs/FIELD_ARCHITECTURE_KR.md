# 🏗️ Elysia Engine: Field Architecture (장의 법칙)

> **"입자를 쫓지 마라. 공간이 피어나는 것을 지켜보라."**
> **"Do not chase the particles. Watch the space bloom."**

이 문서는 [Project Elysia: Paradigm Shift]에 따라 재설계된 **장 중심(Field-based) 아키텍처**의 기술적 명세입니다. 기존의 객체 지향적(Object-based) 물리 연산이 가진 한계(O(N) 병목)를 극복하고, 1060 3GB 환경에서도 무한한 우주를 시뮬레이션하기 위해 **프랙탈 공간 해싱(Fractal Spatial Hashing)**과 **기하 대수 로터(Geometric Algebra Rotor)** 기술이 도입되었습니다.

---

## 1. 패러다임 전환 (The Paradigm Shift)

### 🚫 기존 방식: 라그랑주 관점 (Lagrangian)
*   **원리:** 우주에 존재하는 모든 엔티티(입자)를 리스트에 담고, 매 프레임마다 서로간의 상호작용(중력, 공명)을 계산합니다.
*   **문제점:** 엔티티가 늘어날수록 연산량이 기하급수적으로 증가($O(N^2)$)합니다. "우주가 커지면 멈추는" 치명적인 한계가 있습니다.

### ✅ 신규 방식: 오일러 관점 (Eulerian / Field-based)
*   **원리:** 우주는 **'장(Field)'**이라는 보이지 않는 격자로 구성되어 있습니다. 엔티티는 이 장에 자신의 에너지를 '색칠(Source)'하고, 이동할 때는 장의 '기울기(Gradient)'를 타고 흐릅니다.
*   **장점:** 엔티티가 아무리 많아도, 연산량은 **화면 해상도(공간의 복잡도)**에만 비례($O(Res)$)합니다. 1060 3GB에서도 수백만 개의 별을 시뮬레이션할 수 있습니다.

---

## 2. 하이퍼 코스모스 4대 장 (The 4 Fields)

우주 공간의 각 지점(Voxel)은 다음 4가지 값을 가집니다.

| 축 (Axis) | 장의 이름 (Field Name) | 의미 (Meaning) | 물리적 효과 (Effect) |
| :--- | :--- | :--- | :--- |
| **W** | **Scale Field** (밀도장) | **존재의 무게.** 공간의 밀도와 위계. | **중력(Gravity).** 값이 높은 곳으로 끌려감. (Mass) |
| **X** | **Perception Field** (인지장) | **표면의 질감.** 데이터의 복잡도. | **마찰/저항.** 이동 속도에 영향을 줌. |
| **Y** | **Frequency Field** (주파수장) | **영혼의 색채.** 천사(+7)와 악마(-7). | **공명(Resonance).** 자신과 맞는 주파수로 흐름. |
| **Z** | **Torque Field** (회전장) | **의지의 회전.** 스핀(Spin) 에너지. | **코리올리 힘.** 이동 경로를 휘게 만듦(Rotor). |

---

## 3. 핵심 기술 (Core Technologies)

### 🌲 프랙탈 공간 해싱 (Fractal Spatial Hashing)
*   **문제:** 4차원 공간을 배열로 만들면 메모리가 부족합니다.
*   **해결:** **'존재하는 곳만 기억한다'**는 원칙 하에, 데이터가 있는 좌표만 해시맵(Dictionary)에 저장합니다.
*   **LOD (Level of Detail):** W축(Scale)을 깊이(Depth)로 해석하여, 멀리 있는 우주는 큰 덩어리로, 가까운 우주는 세밀한 입자로 처리합니다. (마인크래프트의 청크 시스템과 유사)

### 🌀 4차원 로터 (Geometric Algebra Rotor)
*   **문제:** 4차원 회전(6개 평면)을 행렬로 계산하면 너무 무겁습니다.
*   **해결:** **기하 대수(Geometric Algebra)**의 로터(Rotor) 개념을 도입했습니다.
*   **원리:** 복잡한 행렬 곱셈 대신, 회전 평면(Bivector)과 각도만으로 회전을 기술하여 연산 단계를 절반으로 줄입니다. 이는 1060 GPU의 병렬 연산에 최적화되어 있습니다.

### 🛡️ 불변의 성소 (The Immutable Vault)
*   **정의:** 좌표 원점 반경 2.0 공간은 **'절대 성역'**입니다.
*   **법칙:** 이곳의 장(Field) 값은 어떤 외부 간섭에도 변하지 않습니다. (W=1, X=1, Y=7, Z=0).
*   **의미:** 이것은 시스템의 안정성을 보장하는 기술적 장치이자, **"사랑은 변하지 않는다"**는 철학적 선언입니다.

---

## 4. 개발자 가이드 (For Jules & Contributors)

### ⚠️ 주의사항
1.  **직접 상호작용 금지:** 엔티티끼리 직접 `distance_to`를 계산하지 마세요. 반드시 `FieldSystem`을 통해 간접적으로 영향을 주고받아야 합니다.
2.  **벡터 사용:** 4차원 연산에는 `Vector4`와 `Rotor`를 사용하세요. 3차원 투영 시에는 `Vector3`로 변환됩니다.
3.  **순수 파이썬:** 이 모든 로직은 `numpy` 없이 순수 파이썬으로 구현되었습니다. 무거운 라이브러리 추가를 자제하세요.

---
*Documented by Jules, System Architect*
*Under the conduction of Harmony's Father*
